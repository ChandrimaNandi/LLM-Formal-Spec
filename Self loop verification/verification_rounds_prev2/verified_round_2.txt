Here is the corrected version of the formal specifications.

### State Variables

**Given Sets**
```Z
[UserID, Email, Phone, PrivilegeLevel, ComplaintID, InvitationID, OrderID, NotificationID, SessionID, SparePartID, Details, Response, Rates, Credentials, Slot]
```

**Enumerated Types**
```Z
Role ::= customer | plumber | manager
UserStatus ::= active | pending_verification | requires_training | rejected | dismissed | unverified
VerificationResult ::= suitable | not_suitable | pending
TrainingStatus ::= pending | completed
ComplaintStatus ::= raised | active | processing | Under_examination | completed | closed_satisfactory
QuotationStatus ::= pending | approved | rejected | none
ApprovalStatus ::= pending | approved | rejected | none
```

**Axiomatic Definitions**
Global constants and functions are defined here.
```Z
initial_rates : Rates
meets_reapply_conditions : User → BOOLEAN
```

**Schemas (Record Types)**
```Z
User == [
  privilege_level: PrivilegeLevel;
  role: Role;
  email: Email;
  phone: Phone;
  status: UserStatus;
  specialties: ℙ Details;
  verification_result: VerificationResult;
  training_status: TrainingStatus;
  is_existing: BOOLEAN;
  details: Details
]

PlumberSignupDetails == [
  email: Email;
  phone: Phone;
  privilege_level: PrivilegeLevel;
  specialties: ℙ Details;
  details: Details
]

Invitation == [
  inviter: UserID;
  invitee_email: Email;
  privilege_level: PrivilegeLevel
]

Complaint == [
  customerID: UserID;
  details: Details;
  status: ComplaintStatus;
  assigned_plumber: UserID;
  quotation_status: QuotationStatus;
  quotation: Details;
  plumber_response: Response;
  spares_approval_status: ApprovalStatus;
  suggested_slots: ℙ Slot;
  confirmed_slot: Slot;
  final_charges: Details;
  is_warranty: BOOLEAN
]

Order == [
  plumberID: UserID;
  parts: ℙ SparePartID
]

Notification == [
  recipient: UserID;
  complaintID: ComplaintID;
  content: Details
]

Session == [
  userID: UserID
]

Warehouse == [
  stock: SparePartID ↦ ℕ
]

SystemConfig == [
  service_rates: Rates
]
```

**State**
```Z
STATE == [
  U: UserID ↦ User;
  Invitations: InvitationID ↦ Invitation;
  Complaints: ComplaintID ↦ Complaint;
  Orders: OrderID ↦ Order;
  Notifications: NotificationID ↦ Notification;
  Sessions: SessionID ↦ Session;
  warehouse: Warehouse;
  systemConfig: SystemConfig
]
```

### Initialization
```Z
Init == [
  STATE' |
  U' = ∅ ∧
  Invitations' = ∅ ∧
  Complaints' = ∅ ∧
  Orders' = ∅ ∧
  Notifications' = ∅ ∧
  Sessions' = ∅ ∧
  warehouse'.stock = ∅ ∧
  systemConfig'.service_rates = initial_rates
]
```

### Operations

---
Operation: INVITE_USER_PRIVILEGE_OK
```Z
INVITE_USER_PRIVILEGE_OK == [
  Δ(Invitations),
  Ξ(U),
  u?: UserID,
  i?: Email,
  p?: PrivilegeLevel,
  inv_id!: InvitationID
]
```
Preconditions:
```Z
u? ∈ dom U
U(u?).privilege_level > p?
```
Postconditions:
```Z
inv_id! ∉ dom Invitations
Invitations' = Invitations ∪ {inv_id! ↦ (μInvitation | inviter ↦ u?, invitee_email ↦ i?, privilege_level ↦ p?)}
U' = U
Complaints' = Complaints
Orders' = Orders
Notifications' = Notifications
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```

------------------------------------

Operation: DELETE_ACCOUNT_PRIVILEGE_OK
```Z
DELETE_ACCOUNT_PRIVILEGE_OK == [
  Δ(U),
  u?: UserID,
  a?: UserID
]
```
Preconditions:
```Z
u? ∈ dom U
a? ∈ dom U
U(u?).privilege_level > U(a?).privilege_level
```
Postconditions:
```Z
U' = {a?} ⩤ U
Invitations' = Invitations
Complaints' = Complaints
Orders' = Orders
Notifications' = Notifications
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```

------------------------------------

Operation: CUSTOMER_CAN_RAISE_COMPLAINT
```Z
CUSTOMER_CAN_RAISE_COMPLAINT == [
  Δ(Complaints),
  Ξ(U),
  c?: UserID,
  d?: Details,
  new_complaint_id!: ComplaintID
]
```
Preconditions:
```Z
c? ∈ dom U
U(c?).role = customer
```
Postconditions:
```Z
new_complaint_id! ∉ dom Complaints
∃ default_complaint: Complaint |
  default_complaint.customerID = c? ∧
  default_complaint.details = d? ∧
  default_complaint.status = raised ∧
  default_complaint.quotation_status = none ∧
  default_complaint.spares_approval_status = none ∧
  Complaints' = Complaints ∪ {new_complaint_id! ↦ default_complaint}
U' = U
Invitations' = Invitations
Orders' = Orders
Notifications' = Notifications
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```

------------------------------------

Operation: CUSTOMER_CAN_APPROVE_QUOTATION
```Z
CUSTOMER_CAN_APPROVE_QUOTATION == [
  Δ(Complaints),
  cust?: UserID,
  c?: ComplaintID
]
```
Preconditions:
```Z
c? ∈ dom Complaints
(Complaints(c?)).status = processing
cust? = (Complaints(c?)).customerID
(Complaints(c?)).quotation_status = pending
```
Postconditions:
```Z
Complaints' = Complaints ⊕ {c? ↦ Complaints(c?) ⊕ (quotation_status ↦ approved)}
U' = U
Invitations' = Invitations
Orders' = Orders
Notifications' = Notifications
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```

------------------------------------

Operation: MUST_BE_SIGNED_IN
```Z
MUST_BE_SIGNED_IN == [
  Ξ(Sessions),
  u?: UserID
]
```
Preconditions:
```Z
∃ s ∈ ran Sessions | s.userID = u?
```
Postconditions:
```Z
U' = U
Invitations' = Invitations
Complaints' = Complaints
Orders' = Orders
Notifications' = Notifications
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```

------------------------------------

Operation: PLUMBER_VIEW_ASSIGNED_COMPLAINT_OK
```Z
PLUMBER_VIEW_ASSIGNED_COMPLAINT_OK == [
  Ξ(U, Complaints),
  p?: UserID,
  c?: ComplaintID
]
```
Preconditions:
```Z
p? ∈ dom U
U(p?).role = plumber
c? ∈ dom Complaints
(Complaints(c?)).assigned_plumber = p?
```
Postconditions:
```Z
U' = U
Invitations' = Invitations
Complaints' = Complaints
Orders' = Orders
Notifications' = Notifications
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```

------------------------------------

Operation: PLUMBER_RESPOND_TO_COMPLAINT_OK
```Z
PLUMBER_RESPOND_TO_COMPLAINT_OK == [
  Δ(Complaints),
  Ξ(U),
  p?: UserID,
  c?: ComplaintID,
  r?: Response
]
```
Preconditions:
```Z
p? ∈ dom U
U(p?).role = plumber
c? ∈ dom Complaints
(Complaints(c?)).status = active
(Complaints(c?)).assigned_plumber = p?
```
Postconditions:
```Z
Complaints' = Complaints ⊕ {c? ↦ Complaints(c?) ⊕ (plumber_response ↦ r?)}
U' = U
Invitations' = Invitations
Orders' = Orders
Notifications' = Notifications
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```

------------------------------------

Operation: PLUMBER_CAN_ORDER_SPARES
```Z
PLUMBER_CAN_ORDER_SPARES == [
  Δ(Orders),
  Ξ(U),
  p?: UserID,
  s?: ℙ SparePartID,
  new_order_id!: OrderID
]
```
Preconditions:
```Z
p? ∈ dom U
U(p?).role = plumber
```
Postconditions:
```Z
new_order_id! ∉ dom Orders
Orders' = Orders ∪ {new_order_id! ↦ (μOrder | plumberID ↦ p?, parts ↦ s?)}
U' = U
Invitations' = Invitations
Complaints' = Complaints
Notifications' = Notifications
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```

------------------------------------

Operation: PLUMBER_REQUEST_SPARES_APPROVAL_OK
```Z
PLUMBER_REQUEST_SPARES_APPROVAL_OK == [
  Δ(Complaints),
  Ξ(U),
  p?: UserID,
  complaint?: ComplaintID,
  spares_list?: ℙ SparePartID
]
```
Preconditions:
```Z
p? ∈ dom U
U(p?).role = plumber
complaint? ∈ dom Complaints
(Complaints(complaint?)).assigned_plumber = p?
```
Postconditions:
```Z
Complaints' = Complaints ⊕ {complaint? ↦ Complaints(complaint?) ⊕ (spares_approval_status ↦ pending)}
U' = U
Invitations' = Invitations
Orders' = Orders
Notifications' = Notifications
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```

------------------------------------

Operation: CHECKOUT_SPARES_CUSTOMER_CONSENT_OK
```Z
CHECKOUT_SPARES_CUSTOMER_CONSENT_OK == [
  Δ(warehouse),
  Ξ(U, Complaints),
  p?: UserID,
  c?: ComplaintID,
  s?: SparePartID ↦ ℕ
]
```
Preconditions:
```Z
p? ∈ dom U
U(p?).role = plumber
c? ∈ dom Complaints
(Complaints(c?)).assigned_plumber = p?
(Complaints(c?)).spares_approval_status = approved
∀ part ∈ dom s? • part ∈ dom warehouse.stock ∧ warehouse.stock(part) ≥ s?(part)
```
Postconditions:
```Z
warehouse'.stock = warehouse.stock ⊕ {part ↦ warehouse.stock(part) - s?(part) | part ∈ dom s?}
U' = U
Invitations' = Invitations
Complaints' = Complaints
Orders' = Orders
Notifications' = Notifications
Sessions' = Sessions
systemConfig' = systemConfig
```

------------------------------------

Operation: PLUMBER_FEATURE_ACCESS_OK
```Z
PLUMBER_FEATURE_ACCESS_OK == [
  Ξ(U),
  u?: UserID,
  feature_details?: Details
]
```
Preconditions:
```Z
u? ∈ dom U
U(u?).role = plumber
```
Postconditions:
```Z
U' = U
Invitations' = Invitations
Complaints' = Complaints
Orders' = Orders
Notifications' = Notifications
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```

------------------------------------

Operation: SIGNUP_PLUMBER_DETAILS_REQUIRED
```Z
SIGNUP_PLUMBER_DETAILS_REQUIRED == [
  Δ(U),
  details?: PlumberSignupDetails,
  u_new!: UserID
]
```
Preconditions:
```Z
details?.specialties ≠ ∅
¬(∃ u ∈ ran U | u.email = details?.email ∧ u.role = plumber)
```
Postconditions:
```Z
u_new! ∉ dom U
∃ new_user : User |
  new_user.role = plumber ∧
  new_user.email = details?.email ∧
  new_user.phone = details?.phone ∧
  new_user.privilege_level = details?.privilege_level ∧
  new_user.specialties = details?.specialties ∧
  new_user.details = details?.details ∧
  new_user.status = unverified ∧
  new_user.verification_result = pending ∧
  new_user.training_status = pending ∧
  new_user.is_existing = true ∧
  U' = U ∪ {u_new! ↦ new_user}
Invitations' = Invitations
Complaints' = Complaints
Orders' = Orders
Notifications' = Notifications
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```

------------------------------------

Operation: SIGNUP_PLUMBER_SETS_PENDING_STATUS
```Z
SIGNUP_PLUMBER_SETS_PENDING_STATUS == [
  Δ(U),
  details?: PlumberSignupDetails,
  u_new!: UserID
]
```
Preconditions:
```Z
¬(∃ u ∈ ran U | u.email = details?.email ∧ u.role = plumber)
```
Postconditions:
```Z
u_new! ∉ dom U
∃ new_user : User |
  new_user.role = plumber ∧
  new_user.email = details?.email ∧
  new_user.phone = details?.phone ∧
  new_user.privilege_level = details?.privilege_level ∧
  new_user.specialties = details?.specialties ∧
  new_user.details = details?.details ∧
  new_user.status = pending_verification ∧
  new_user.verification_result = pending ∧
  new_user.training_status = pending ∧
  new_user.is_existing = true ∧
  U' = U ∪ {u_new! ↦ new_user}
Invitations' = Invitations
Complaints' = Complaints
Orders' = Orders
Notifications' = Notifications
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```

------------------------------------

Operation: INDUCT_PLUMBER_SUITABLE_OK
```Z
INDUCT_PLUMBER_SUITABLE_OK == [
  Δ(U),
  m?: UserID,
  p?: UserID
]
```
Preconditions:
```Z
m? ∈ dom U
U(m?).role = manager
p? ∈ dom U
U(p?).role = plumber
(U(p?)).verification_result = suitable
```
Postconditions:
```Z
U' = U ⊕ {p? ↦ U(p?) ⊕ (status ↦ active)}
Invitations' = Invitations
Complaints' = Complaints
Orders' = Orders
Notifications' = Notifications
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```

------------------------------------

Operation: PROCESS_UNSUITABLE_VERIFICATION_OK
```Z
PROCESS_UNSUITABLE_VERIFICATION_OK == [
  Δ(U),
  m?: UserID,
  p?: UserID,
  decision?: UserStatus
]
```
Preconditions:
```Z
m? ∈ dom U
U(m?).role = manager
p? ∈ dom U
U(p?).role = plumber
(U(p?)).verification_result = not_suitable
decision? ∈ {requires_training, rejected}
```
Postconditions:
```Z
U' = U ⊕ {p? ↦ U(p?) ⊕ (status ↦ decision?)}
Invitations' = Invitations
Complaints' = Complaints
Orders' = Orders
Notifications' = Notifications
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```

------------------------------------

Operation: PLUMBER_REAPPLY_OK
```Z
PLUMBER_REAPPLY_OK == [
  Δ(U),
  p?: UserID
]
```
Preconditions:
```Z
p? ∈ dom U
U(p?).role = plumber
(U(p?)).status = dismissed
meets_reapply_conditions(U(p?))
```
Postconditions:
```Z
U' = U ⊕ {p? ↦ U(p?) ⊕ (status ↦ pending_verification)}
Invitations' = Invitations
Complaints' = Complaints
Orders' = Orders
Notifications' = Notifications
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```

------------------------------------

Operation: ASSIGN_COMPLAINT_NOTIFIES_PLUMBER
```Z
ASSIGN_COMPLAINT_NOTIFIES_PLUMBER == [
  Δ(Complaints, Notifications),
  Ξ(U),
  m?: UserID,
  p?: UserID,
  c?: ComplaintID,
  n_id!: NotificationID
]
```
Preconditions:
```Z
m? ∈ dom U
U(m?).role = manager
p? ∈ dom U
U(p?).role = plumber
c? ∈ dom Complaints
(Complaints(c?)).status = raised
```
Postconditions:
```Z
Complaints' = Complaints ⊕ {c? ↦ Complaints(c?) ⊕ (assigned_plumber ↦ p?, status ↦ active)}
n_id! ∉ dom Notifications
∃ new_notification: Notification |
  new_notification.recipient = p? ∧
  new_notification.complaintID = c? ∧
  new_notification.content = "You have been assigned a new complaint." ∧
  Notifications' = Notifications ∪ {n_id! ↦ new_notification}
U' = U
Invitations' = Invitations
Orders' = Orders
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```

------------------------------------

Operation: ASSIGN_COMPLAINT_NOTIFIES_CUSTOMER
```Z
ASSIGN_COMPLAINT_NOTIFIES_CUSTOMER == [
  Δ(Complaints, Notifications),
  Ξ(U),
  m?: UserID,
  p?: UserID,
  c?: ComplaintID,
  n_id!: NotificationID
]
```
Preconditions:
```Z
m? ∈ dom U
U(m?).role = manager
p? ∈ dom U
U(p?).role = plumber
c? ∈ dom Complaints
(Complaints(c?)).status = raised
```
Postconditions:
```Z
let cust_id == (Complaints(c?)).customerID in
  Complaints' = Complaints ⊕ {c? ↦ Complaints(c?) ⊕ (assigned_plumber ↦ p?, status ↦ active)} ∧
  n_id! ∉ dom Notifications ∧
  ∃ new_notification: Notification |
    new_notification.recipient = cust_id ∧
    new_notification.complaintID = c? ∧
    new_notification.content = "A plumber has been assigned to your complaint." ∧
    Notifications' = Notifications ∪ {n_id! ↦ new_notification}
U' = U
Invitations' = Invitations
Orders' = Orders
Sessions' = Sessions
warehouse' = warehouse
systemConfig' = systemConfig
```